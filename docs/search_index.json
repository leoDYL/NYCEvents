[["index.html", "NYC Events Analysis Chapter 1 Introduction", " NYC Events Analysis Leo Du, Hao Li 2021-11-28 Chapter 1 Introduction As Columbia students, we live in one of the most diverse and energetic cities in the world. The city has many interesting public places to visit - New York City has more than 1,700 parks, playgrounds, and recreation facilities across the five boroughs. With the large number of public facilities, there are almost always fun events happening in the city everyday. We’re very fascinated by the different events hosted by different organizations and cultural groups here in NYC, and would like to explore several aspects about this topic. "],["data-sources.html", "Chapter 2 Data sources", " Chapter 2 Data sources The data we are using for this project are listed as following: NYC Parks Events Listing – Event Listing, which can be downloaded as a CSV file. NYC Parks Events Listing – Event Categories, which can be downloaded as a CSV file NYC Parks Events Listing – Event Locations, which can be downloaded as a CSV file NYC Parks Events Listing – Event Organizers, which can be downloaded as a CSV file You can use our prepared script at https://github.com/leoDYL/NYCEvents/blob/main/scripts/download_raw_data.R to download all the source raw data we used in this project. This script will create a data/raw_data directory under the project root (please run this scrip under the project root) and download all the source data files we used under this directory. "],["data-transformation.html", "Chapter 3 Data transformation 3.1 Read Raw Data 3.2 Joining events with other tables", " Chapter 3 Data transformation (Work in progress) 3.1 Read Raw Data 3.2 Joining events with other tables (TOOD: No longer accurate) The events listing data is the main data table, therefore, we want to keep all rows in the events listing table even if there is no matching row in the other tables. As a result, we are performing left outer joins and keeping all rows of the nyc_event_listing_events data frame. ## # A tibble: 91,715 × 2 ## EvtId CatCt ## &lt;int&gt; &lt;int&gt; ## 1 62223 2 ## 2 62224 2 ## 3 62225 2 ## 4 62226 2 ## 5 62227 2 ## 6 62228 2 ## 7 62229 2 ## 8 62230 2 ## 9 62231 2 ## 10 62232 2 ## # … with 91,705 more rows ## # A tibble: 127 × 2 ## Cat count ## &lt;chr&gt; &lt;int&gt; ## 1 Accessible 6653 ## 2 Anchor Parks 12 ## 3 Art 12046 ## 4 Art in the Parks: Celebrating 50 Years 134 ## 5 Art in the Parks: UNIQLO Park Expressions Grant 57 ## 6 Arts &amp; Crafts 6888 ## 7 Arts, Culture &amp; Fun Series 734 ## 8 Astronomy 353 ## 9 Best for Kids 19785 ## 10 Bike Month NYC 91 ## # … with 117 more rows ## # A tibble: 85,502 × 2 ## EvtId OrgCt ## &lt;int&gt; &lt;int&gt; ## 1 62223 1 ## 2 62224 1 ## 3 62225 1 ## 4 62226 1 ## 5 62227 1 ## 6 62228 1 ## 7 62229 1 ## 8 62230 1 ## 9 62231 1 ## 10 62232 1 ## # … with 85,492 more rows ## # A tibble: 2,302 × 2 ## Org count ## &lt;chr&gt; &lt;int&gt; ## 1 : East 43rd Street Community G 1 ## 2 (TASCA) The American Small Cra 72 ## 3 (TASCA)The American Small Craf 1 ## 4 106 St. Old Timers 1 ## 5 106 St. Old Timers, Inc. 2 ## 6 10th &amp; Stuyvesant Streets Bloc 1 ## 7 132nd st Community Garden 1 ## 8 14 Sculptors 7 ## 9 150 - 155th Street Edgecombe B 2 ## 10 150th-155th Street Edgecombe A 11 ## # … with 2,292 more rows ## # A tibble: 2,302 × 3 ## # Groups: grp [733] ## Org count grp ## &lt;chr&gt; &lt;int&gt; &lt;int&gt; ## 1 : East 43rd Street Community G 1 1 ## 2 Aberdeen Street Community Seed 1 1 ## 3 East Fourth Street Community G 1 1 ## 4 Java Street Community Garden 1 1 ## 5 Madison Street Community Garde 1 1 ## 6 Woodbine Street Community Gard 1 1 ## 7 East 4th Street Community Gard 3 1 ## 8 Poplar Street Community Garden 3 1 ## 9 East 43rd Street Community Gar 9 1 ## 10 (TASCA)The American Small Craf 1 2 ## # … with 2,292 more rows "],["missing-values.html", "Chapter 4 Missing values 4.1 Missing Values By Individual Tables 4.2 Missing Values for Joined Data Table 4.3 Top Categories with Missing Organizer 4.4 Missing Values for Crimes in Parks", " Chapter 4 Missing values 4.1 Missing Values By Individual Tables We first analyze the missing values pattern for all of our tables individually. 4.1.1 Missing Values for Main Events Listing Table As shown in the graph below, the majority of the data points have missing fields. The most missed fields are location_description (LcDs) and cost_description (CsDs). Roughly 80% of the data points aremissing location description, and more than 75% are missing cost description. Almost 40% of the data are actually missing both. We also have a lot of Email (Em) and Phone (Ph) missings (around 25% and 20% respectively). Those fields are not useful for our further analysis. For the description fields, they are textual and semantic, which would be interesting subjects for analysis and learning. However, the complexity of such analysis is beyond this study. As for contact information like email and phone number, they are not very relevant to our analysis. The top three missing patterns are missing both LcDs and CsDs, missing LcDs only, and missing CsDs only. And the top 9 missing patterns are all involving some combination of LcDs, CsDs, Em and Ph. ## LcDs CsDs Em Ph Snp Ds Url EvtId Title Dt ST ET CsFr ## 60360 59790 22941 16896 310 4 2 0 0 0 0 0 0 ## MtSe Ntc ## 0 0 In the chart below, we dropped the fields that we do not need as mentioned above. As shown in the graph, almost all the data points are complete cases now. The few missing data in snippet (Snp), description (Ds) and url (Url) fields, which are also not really needed in our study. ## Snp Ds Url EvtId Title Dt ST ET CsFr MtSe Ntc ## 310 4 2 0 0 0 0 0 0 0 0 4.1.2 Missing Values for Auxiliary Tables We also inspect the other auxiliary data tables that we are planning to use for our analysis. ## Org EvtId ## 1 0 As can be clearly seen from the missing data plots, the event category table itself does not have any missing data, and the event organizer table has very few missing organizer rows, more precisely, it only has 1 row of organizer missing. The event id (EvtId) appears to be a unique identifier for events, and is always present in all rows of all tables we analyze. As for the location data for the park events, as we can see from the chart below, there are decent amount of missing fields in the data set. Almost 50% of the data are missing Address (Addr), and unfortunately we have almost 40% of the data missing field is zip (Zip), which we were hoping to use to help us allocate the parks into smaller regions for further location-based studies. Then the only location information for us to perform fine-grained regionalization of the parks is thelongitude (Long) and latitude (Lat) field pair, for which we fortunately have 0 missing data. But the complexity would be much higher. It is interesting that the data set has complete longitude and latitude records for the events while a lot of the data are missing the zip code data. With zip code being the apparent easier location data to acquire, we suspect that the longitude and latitude data are required for event registration so that it could be located on a map instantly. Analyzing the missing patterns by rows, the top pattern is actually “complete cases”, although for only about 15% of the dataset. The data records missing only zip code (Zip) or address (Addr) comes second and third, then followed by the pattern of data missing all of address, zip code, and accessibility information. ## Addr Accs Zip pkId Bo LcNm EvtId Lat Long ## 46061 42620 37826 12263 1479 2 0 0 0 After dropping “Addr”, “Accs”, “pkId”, “Zip” columns in the data set, we can have a closer look at the missing data percentage for Borough (Bo) and Location Name (LcNm). Location name is not a reliable source of information for location identification, since locations are sketchy and not rigidly defined. The missing data in the Borough (Bo) fields are minimal, which would not affect our coarse-grained location-based studies. ## Bo LcNm EvtId Lat Long ## 1479 2 0 0 0 How about the missing patterns when joining the individual additional information tables (categories, locations, and organizers) with the main events listing table? We will explore in the following section. 4.2 Missing Values for Joined Data Table Next, we analyze the missing value patterns when we join our main events listing table with the auxiliary tables. 4.2.1 Using Full Outer Joins As previously discussed, the location description (LcDs), cost description (CsDs), email (Em), phone (Ph), snippet (Snp), description (Ds), url (url) are not interesting variables for the purpose of our project, as most of them are free-form text data, thus we are dropping them in this section for analyzing the missing patterns for the events listing data joined with other additional information tables since we do not really care if they are missing or not. Also, as disccused previously, title (Title), is cost free (CsFr), date (Dt), end time (ET), is must see (MtSe), notice (Ntc), start time (ST) all have no missing data in the main events listing data table, we will only keep title (Title) to represent these variables in this section. As analyzed above, Lat / Long are always present in the locations table, thus we will use Lat to count the number of unique locations per EvtId, thus we used it to determine if location information is missing or not in the joined table. ## Title Org Cat Loc EvtId ## 19406 8784 2571 2010 0 When only looking at these variables, almost 75% of the rows have complete information. There are roughly 15% cases from the joined dataset that have all of the event_id, organizer, category, and location information, but missing the title (and thus the other variables information) only, meaning that there are close to 15% of the events with an event_id that appear in all of the auxiliary tables but not the main event listing table. Therefore, if we performed left outer joins on the tables (where we keep the main event listing table on the left), we should be getting close to 90% of complete cases. Also, roughly more than 20% of the cases are missing title, these are the events with event_id appear in at least one of the auxiliary tables but not in the main table. It is also interesting to see that there are no cases of all organizer, category, location information missing but with title information present. So any listed events in the main dataset have at least one of the three information (organizer, category, location). A potential explanation for the above facts might be that a placeholder event can be registered in the system with a minimum one of these three pieces of information and an event_id was generated, but the event may or may not ultimately get listed and stored in the main event listing table. 4.2.2 Using Left Outer Joins The following plot demonstrates the missing pattern analysis when we instead perform left joins of the main table with the auxiliary tables. It confirms that we have close to 90% (from the plots, more than 87.5%) of complete cases among these variables, and the top missing variable is organizer (less than 12.5%), followed by category, followed by location information. As a result of the analysis in this section, we will use the table produced by the left outer join (including the variables that were left out in this section due to the Title representation) for our main analysis in later chapters, since it includes the most complete and interesting information. 4.3 Top Categories with Missing Organizer It is still pretty surprising to us that after the left outer join, we still have more than 10% of the cases missing an organizer, as we thought all events should have an organizer. Therefore, we wanted to see what are the top categories of events without the organizer information. Note here that an event might be associated with multiple categories, so the total number of missing organizers across the different categories would be higher than the number of events with missing organizers in the previous section. So it seems that sports-related events (with Fitness/Running/Sports/Outdoor Fitness categories) are the most common themes for events missing organizer information in our dataset. A closer look at the specific event titles suggests that a lot of them were running events organized by “NYRR” in different parks: 4.4 Missing Values for Crimes in Parks ## Park Qtr Boro Size Cat Mdr Rape Rob Ass Burg G_L ## 0 0 0 0 0 0 0 0 0 0 0 ## GL_M_V Tot ## 0 0 The NYC park crime data originally comes in different files by quarter. We consolidated all of them to analyze the missing data pattern. In order to ensure that no parks are missed in any of the data files, we created a data set with all the &lt;park, quarter&gt; pairs there could possibly be in the crime data set. Then we merge the new data set with the crime data set to perform the missing data analysis. As shown in the graph above, there is actually no missing data in the crime data set. "],["results.html", "Chapter 5 Results 5.1 Events and Parks Analysis 5.2 Timeseries Analysis 5.3 Spatial Analysis 5.4 References", " Chapter 5 Results 5.1 Events and Parks Analysis 5.1.1 Top Event Categories 5.1.2 Top Event Durations 5.1.3 Most Lively Parks 5.1.4 Parks with Most Diversified Events 5.1.5 Ratio of free events in parks 5.2 Timeseries Analysis Now, it is natural to think that there is some seasonality in the events that happen in the NYC public locations. Here we are going to perform an analysis on what are some interesting seasonal patterns 5.2.1 Timeseries Analysis on NYC Parks Events First, we simply take an overview look at the count of listed events over time: Here, we observe a few things at first sight: The data counts appears to be abnormally low after the start of 2019, probably due to limited data availablility in the dataset, therefore, we are going to only use data prior to 2019 in our following timeseries analysis on the events daata in this section. The seasonality pattern looks similar for each year. There is definitely fewer events in winters around Janurary and generally more events in the summers. The previous plot, although helps us identify the general pattern, looks pretty noisy, so next let’s take a different view, which is less noisy: Here, we are aggregating the event counts by month, and plotted bar charts faceted by year. It is very clear from these charts that the monthly counts and trends do indeed have a very similar pattern across the years 2013-2018. Other than some fluctuations, January through March are typically the more quiet months with fewer than 500 events in most years, then the number of events gradually increases in April, May and June, and peaks in July or August with more than 1500 events, and then gradually decreases into the winter season, with around 500 events in December. Now, how about different days of week? It’s certainly natural to speculate that there will be more events over weekends than during weekdays. Here, since we have concluded in the previous section that the seasonal trend is similar across the years, we take a closer look at the number of listed events by day of week in 2017 to get an idea. As expected, Saturdays do typically have a lot more events than the other days, especially during the summer season. It is somewhat surprising that Sundays only have about similar number of events as Tuesdays, Wednesdays and Thursdays. We speculate that for weekends, people prefer to stay at home with family and prepare for the new week on Sundays and prefer to go out to events on Saturdays, and therefore the event organizers have a preference to organize events on Saturdays. It is not surprising that Monday have the fewest events since people are typically busy on the first business day of the week. Fridays also appear to have the 2nd fewest number of events among the different days of week, as people wrap up the work for the week, and usually have corporate events or team bonding activities on Fridays. 5.2.2 Timeseries Analysis on Event Categories After the initial timeseries analysis, we feel that it’s likely that other than the general seasonality and weekly trends, different event sub-categories could have very different trends. Thus we will take a closer look in this section. 5.3 Spatial Analysis 5.3.1 Cost From the missing values chapter, we do not have missing data for CsFr, Lat, Long TODO analyze weekends vs weekdays TODO Too much data for this, select a year maybe 5.3.2 By Category 5.3.3 By Organizer ## # A tibble: 8 × 2 ## Org count ## &lt;chr&gt; &lt;int&gt; ## 1 Poe Visitor Center 7286 ## 2 Bryant Park Corp. 5811 ## 3 Central Park Conservancy 4729 ## 4 Prospect Park Alliance 4057 ## 5 Urban Park Rangers 3705 ## 6 NYC Parks 3469 ## 7 Summer on the Hudson 3382 ## 8 Queens Botanical Garden 3371 5.4 References D. Kahle and H. Wickham. ggmap: Spatial Visualization with ggplot2. The R Journal, 5(1), 144-161. URL http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
