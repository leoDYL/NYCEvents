<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | NYC Events Analysis</title>
  <meta name="description" content="Chapter 4 Missing values | NYC Events Analysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | NYC Events Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | NYC Events Analysis" />
  
  
  

<meta name="author" content="Leo Du, Hao Li" />


<meta name="date" content="2021-12-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Events Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#read-raw-data"><i class="fa fa-check"></i><b>3.1</b> Read Raw Data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#joining-events-with-other-tables"><i class="fa fa-check"></i><b>3.2</b> Joining events with other tables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#missing-values-by-individual-tables"><i class="fa fa-check"></i><b>4.1</b> Missing Values By Individual Tables</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="missing-values.html"><a href="missing-values.html#missing-values-for-main-events-listing-table"><i class="fa fa-check"></i><b>4.1.1</b> Missing Values for Main Events Listing Table</a></li>
<li class="chapter" data-level="4.1.2" data-path="missing-values.html"><a href="missing-values.html#missing-values-for-auxiliary-tables"><i class="fa fa-check"></i><b>4.1.2</b> Missing Values for Auxiliary Tables</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#missing-values-for-joined-data-table"><i class="fa fa-check"></i><b>4.2</b> Missing Values for Joined Data Table</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="missing-values.html"><a href="missing-values.html#using-full-outer-joins"><i class="fa fa-check"></i><b>4.2.1</b> Using Full Outer Joins</a></li>
<li class="chapter" data-level="4.2.2" data-path="missing-values.html"><a href="missing-values.html#using-left-outer-joins"><i class="fa fa-check"></i><b>4.2.2</b> Using Left Outer Joins</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#top-categories-with-missing-organizer"><i class="fa fa-check"></i><b>4.3</b> Top Categories with Missing Organizer</a></li>
<li class="chapter" data-level="4.4" data-path="missing-values.html"><a href="missing-values.html#missing-values-for-crimes-in-parks"><i class="fa fa-check"></i><b>4.4</b> Missing Values for Crimes in Parks</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#events-and-parks-analysis"><i class="fa fa-check"></i><b>5.1</b> Events and Parks Analysis</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#top-event-categories-organizers-locations-and-durations"><i class="fa fa-check"></i><b>5.1.1</b> Top Event Categories, Organizers, Locations and Durations</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#most-diversified-organizers"><i class="fa fa-check"></i><b>5.1.2</b> Most Diversified Organizers</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#most-diversified-park"><i class="fa fa-check"></i><b>5.1.3</b> Most Diversified Park</a></li>
<li class="chapter" data-level="5.1.4" data-path="results.html"><a href="results.html#top-organizers-event-categories-and-locations-preferences"><i class="fa fa-check"></i><b>5.1.4</b> Top Organizers’ Event Categories and Locations Preferences</a></li>
<li class="chapter" data-level="5.1.5" data-path="results.html"><a href="results.html#cost-borough-duration-and-time-of-events"><i class="fa fa-check"></i><b>5.1.5</b> Cost, Borough, Duration, and Time of Events</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#timeseries-analysis"><i class="fa fa-check"></i><b>5.2</b> Timeseries Analysis</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#timeseries-analysis-on-nyc-parks-events"><i class="fa fa-check"></i><b>5.2.1</b> Timeseries Analysis on NYC Parks Events</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#timeseries-analysis-on-event-categories"><i class="fa fa-check"></i><b>5.2.2</b> Timeseries Analysis on Event Categories</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#crimes-in-parks"><i class="fa fa-check"></i><b>5.3</b> Crimes in Parks</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#crimes-in-parks-overview"><i class="fa fa-check"></i><b>5.3.1</b> Crimes in Parks Overview</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#crime-timeseries-analysis"><i class="fa fa-check"></i><b>5.3.2</b> Crime Timeseries Analysis</a></li>
<li class="chapter" data-level="5.3.3" data-path="results.html"><a href="results.html#crimes-in-parks-and-events-in-parks"><i class="fa fa-check"></i><b>5.3.3</b> Crimes in parks and events in parks</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#spatial-analysis"><i class="fa fa-check"></i><b>5.4</b> Spatial Analysis</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#cost"><i class="fa fa-check"></i><b>5.4.1</b> Cost</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#by-category"><i class="fa fa-check"></i><b>5.4.2</b> By Category</a></li>
<li class="chapter" data-level="5.4.3" data-path="results.html"><a href="results.html#by-organizer"><i class="fa fa-check"></i><b>5.4.3</b> By Organizer</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#references"><i class="fa fa-check"></i><b>5.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#monthly-event-count-time-series-by-category"><i class="fa fa-check"></i><b>6.1</b> Monthly Event Count Time-series by Category</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Events Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div id="missing-values-by-individual-tables" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Missing Values By Individual Tables</h2>
<p>We first analyze the missing values pattern for all of our tables individually.</p>
<div id="missing-values-for-main-events-listing-table" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Missing Values for Main Events Listing Table</h3>
<p>As shown in the graph below, the majority of the data points have missing fields. The most missed fields are
location_description (<code>LcDs</code>) and cost_description (<code>CsDs</code>). Roughly 80% of the data points aremissing location
description, and more than 75% are missing cost description. Almost 40% of the data are actually missing both. We
also have a lot of Email (<code>Em</code>) and Phone (<code>Ph</code>) missings (around 25% and 20% respectively). Those fields are not
useful for our further analysis. For the description fields, they are textual and semantic, which would be
interesting subjects for analysis and learning. However, the complexity of such analysis is beyond this study. As
for contact information like email and phone number, they are not very relevant to our analysis. The top three
missing patterns are missing both <code>LcDs</code> and <code>CsDs</code>, missing <code>LcDs</code> only, and missing <code>CsDs</code> only. And the top 9
missing patterns are all involving some combination of <code>LcDs</code>, <code>CsDs</code>, <code>Em</code> and <code>Ph</code>.</p>
<p><img src="finalproj_files/figure-html/nyc%20event%20listing%20events%20missing%20data-1.png" width="672" /><img src="finalproj_files/figure-html/nyc%20event%20listing%20events%20missing%20data-2.png" width="672" /></p>
<pre><code>##  LcDs  CsDs    Em    Ph   Snp    Ds   Url EvtId Title    Dt    ST    ET  CsFr 
## 60360 59790 22941 16896   310     4     2     0     0     0     0     0     0 
##  MtSe   Ntc 
##     0     0</code></pre>
<p>In the chart below, we dropped the fields that we do not need as mentioned above. As shown in the graph, almost
all the data points are complete cases now. The few missing data in snippet (<code>Snp</code>), description (<code>Ds</code>) and url
(<code>Url</code>) fields, which are also not really needed in our study.</p>
<p><img src="finalproj_files/figure-html/nyc%20event%20listing%20events%20missing%20data%20pruned-1.png" width="672" /><img src="finalproj_files/figure-html/nyc%20event%20listing%20events%20missing%20data%20pruned-2.png" width="672" /></p>
<pre><code>##   Snp    Ds   Url EvtId Title    Dt    ST    ET  CsFr  MtSe   Ntc 
##   310     4     2     0     0     0     0     0     0     0     0</code></pre>
</div>
<div id="missing-values-for-auxiliary-tables" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Missing Values for Auxiliary Tables</h3>
<p>We also inspect the other auxiliary data tables that we are planning to use for our analysis.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" /><img src="finalproj_files/figure-html/unnamed-chunk-11-2.png" width="672" /></p>
<pre><code>##   Org EvtId 
##     1     0</code></pre>
<p>As can be clearly seen from the missing data plots, the event category table itself does not have any missing
data, and the event organizer table has very few missing organizer rows, more precisely, it only has 1 row of
organizer missing.</p>
<p>The event id (<code>EvtId</code>) appears to be a unique identifier for events, and is always present in all rows of all
tables we analyze.</p>
<p>As for the location data for the park events, as we can see from the chart below, there are decent amount of
missing fields in the data set. Almost 50% of the data are missing Address (<code>Addr</code>), and unfortunately we have almost 40% of the data missing field is zip (<code>Zip</code>), which we were hoping to use to help us allocate the
parks into smaller regions for further location-based studies. Then the only location information for us to
perform fine-grained regionalization of the parks is thelongitude (<code>Long</code>) and latitude (<code>Lat</code>) field pair, for
which we fortunately have 0 missing data. But the complexity would be much higher. It is interesting that the data
set has complete longitude and latitude records for the events while a lot of the data are missing the zip code
data. With zip code being the apparent easier location data to acquire, we suspect that the longitude and
latitude data are required for event registration so that it could be located on a map instantly.</p>
<p>Analyzing the missing patterns by rows, the top pattern is actually “complete cases”, although for only about 15%
of the dataset. The data records missing only zip code (<code>Zip</code>) or address (<code>Addr</code>) comes second and third, then
followed by the pattern of data missing all of address, zip code, and accessibility information.</p>
<p><img src="finalproj_files/figure-html/nyc%20event%20listing%20locations%20missing%20data-1.png" width="672" /><img src="finalproj_files/figure-html/nyc%20event%20listing%20locations%20missing%20data-2.png" width="672" /></p>
<pre><code>##  Addr  Accs   Zip  PkId    Bo  LcNm EvtId   Lat  Long 
## 46061 42620 37826 12263  1479     2     0     0     0</code></pre>
<p>After dropping “Addr”, “Accs”, “PkId”, “Zip” columns in the data set, we can have a closer look at the missing data percentage for Borough (<code>Bo</code>) and Location Name (<code>LcNm</code>). Location name is not a reliable source of information for location identification, since locations are sketchy and not rigidly defined. The missing data in the Borough (<code>Bo</code>) fields are minimal, which would not affect our coarse-grained location-based studies.</p>
<p><img src="finalproj_files/figure-html/nyc%20event%20listing%20locations%20missing%20data%20w/%20dropped%20columns-1.png" width="672" /><img src="finalproj_files/figure-html/nyc%20event%20listing%20locations%20missing%20data%20w/%20dropped%20columns-2.png" width="672" /></p>
<pre><code>##    Bo  LcNm EvtId   Lat  Long 
##  1479     2     0     0     0</code></pre>
<p>How about the missing patterns when joining the individual additional information tables (categories, locations, and organizers) with the main events listing table? We will explore in the following section.</p>
</div>
</div>
<div id="missing-values-for-joined-data-table" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Missing Values for Joined Data Table</h2>
<p>Next, we analyze the missing value patterns when we join our main events listing table with the auxiliary tables.</p>
<div id="using-full-outer-joins" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Using Full Outer Joins</h3>
<p>As previously discussed, the location description (<code>LcDs</code>), cost description (<code>CsDs</code>), email (<code>Em</code>), phone (<code>Ph</code>),
snippet (<code>Snp</code>), description (<code>Ds</code>), url (<code>url</code>) are not interesting variables for the purpose of our project, as
most of them are free-form text data, thus we are dropping them in this section for analyzing the missing patterns
for the events listing data joined with other additional information tables since we do not really care if they are missing or not.</p>
<p>Also, as disccused previously, title
(<code>Title</code>), is cost free (<code>CsFr</code>), date (<code>Dt</code>), end time (<code>ET</code>), is must see (<code>MtSe</code>), notice (<code>Ntc</code>), start time
(<code>ST</code>) all have no missing data in the main events listing data table, we will only keep title (<code>Title</code>) to
represent these variables in this section.</p>
<p>As analyzed above, <code>Lat</code> / <code>Long</code> are always present in the locations table, thus we will use <code>Lat</code> to count the
number of unique locations per <code>EvtId</code>, thus we used it to determine if location information is missing or not in
the joined table.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre><code>## Title   Org   Cat   Loc EvtId 
## 19406  8784  2571  2010     0</code></pre>
<p>When only looking at these variables, almost 75% of the rows have complete information.</p>
<p>There are roughly 15% cases from the joined dataset that have all of the event_id, organizer, category, and
location information, but missing the title (and thus the other variables information) only, meaning that there
are close to 15% of the events with an event_id that appear in all of the auxiliary tables but not the main event
listing table. Therefore, if we performed left outer joins on the tables (where we keep the main event listing
table on the left), we should be getting close to 90% of complete cases.</p>
<p>Also, roughly more than 20% of the cases are missing title, these are the events with event_id appear in at least one of the auxiliary tables but not in the main table.</p>
<p>It is also interesting to see that there are no cases of all organizer, category, location information missing but with title information present. So any listed events in the main dataset have at least one of the three information (organizer, category, location).</p>
<p>A potential explanation for the above facts might be that a placeholder event can be registered in the
system with a minimum one of these three pieces of information and an event_id was generated, but the event
may or may not ultimately get listed and stored in the main event listing table.</p>
</div>
<div id="using-left-outer-joins" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Using Left Outer Joins</h3>
<p>The following plot demonstrates the missing pattern analysis when we instead perform left joins of the main table
with the auxiliary tables. It confirms that we have close to 90% (from the plots, more than 87.5%) of complete
cases among these variables, and the top missing variable is organizer (less than 12.5%), followed by category,
followed by location information.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>As a result of the analysis in this section, we will use the table produced by the left outer join (including the
variables that were left out in this section due to the <code>Title</code> representation) for our main
analysis in later chapters, since it includes the most complete and interesting information.</p>
</div>
</div>
<div id="top-categories-with-missing-organizer" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Top Categories with Missing Organizer</h2>
<p>It is still pretty surprising to us that after the left outer join, we still have more than 10% of the cases
missing an organizer, as we thought all events should have an organizer. Therefore, we wanted to see what are the top categories of events without the organizer information.</p>
<p>Note here that an event might be associated with multiple categories, so the total number of missing organizers
across the different categories would be higher than the number of events with missing organizers in the previous
section.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>So it seems that sports-related events (with Fitness/Running/Sports/Outdoor Fitness categories) are the most common themes for events missing organizer information in our dataset. A closer look at the specific event titles suggests that a lot of them were running events organized by “NYRR” in different parks:</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="missing-values-for-crimes-in-parks" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Missing Values for Crimes in Parks</h2>
<p><img src="finalproj_files/figure-html/nyc%20park%20crimes%20missing%20data-1.png" width="672" /></p>
<pre><code>##   Park    Qtr   Boro   Size    Cat    Mdr   Rape    Rob    Ass   Burg    G_L 
##      0      0      0      0      0      0      0      0      0      0      0 
## GL_M_V    Tot 
##      0      0</code></pre>
<p>The NYC park crime data originally comes in different files by quarter. We consolidated all of them to analyze the
missing data pattern. In order to ensure that no parks are missed in any of the data files, we created a data set
with all the &lt;park, quarter&gt; pairs there could possibly be in the crime data set. Then we merge the new data set
with the crime data set to perform the missing data analysis. As shown in the graph above, there is actually no
missing data in the crime data set.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/leoDYL/NYCEvents/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/leoDYL/NYCEvents/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
