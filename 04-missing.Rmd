# Missing values

```{r}
library(tidyverse)
source("projectlibs/missing_value_plot.R")
```

```{r nyc event listing events missing data}
missing_value_plot(nyc_event_listing_events, percent=FALSE)
col_missing = colSums(is.na(nyc_event_listing_events)) %>% sort(decreasing = TRUE)
col_missing
```


```{r}
names(nyc_events_with_categories) <- c(
  "EvtId", "Title", "Dt", "ST", "ET", "LcDs", "Ds", "Snp", "Ph", "Em", "CsFr", "CsDs",
  "MtSe", "Url", "Ntc", "name"
)
missing_value_plot(nyc_events_with_categories, percent=FALSE)

```

### Missing Values for individual data tables

We also inspect the other individual data tables that we are planning to use for our analysis.

```{r}
missing_value_plot(nyc_event_categories, percent = TRUE)
missing_value_plot(nyc_event_organizers, percent = TRUE)
colSums(is.na(nyc_event_organizers)) %>% sort(decreasing = TRUE)
```

As can be clearly seen from the missing data plots, the event category table itself does not have any missing data, and the event organizer table has very few missing organizer rows, more precisely, it only has 1 row missing.

How about joining the individual additional information tables (categories, locations, and organizers) with the main events listing table? We will explore in the following section.


### Missing Values for Organizers and Categories

As analyzed above, 

```{r}

missing_value_plot(nyc_events_with_cat_org_counts[c("EvtId", "OrgCt", "CatCt", "Title")], percent = TRUE)
missing_value_plot(nyc_events_with_cat_org_counts, percent = TRUE)

nyc_event_listing_events %>%
  merge(y = nyc_events_with_category_counts, 
        by = "EvtId", 
        all.x = TRUE, all.y = TRUE) %>%
  missing_value_plot(percent = TRUE)

nyc_event_listing_events %>%
  merge(y = nyc_events_with_organizer_counts, 
        by = "EvtId", 
        all.x = TRUE, all.y = TRUE) %>%
  missing_value_plot(percent = TRUE)
```

When only looking at 

There are roughly 15% cases from the joined dataset that have registered an event_id, organizer and category 


